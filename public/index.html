<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ams938 Challenge 4</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Include Angular 1.X -->
    <script src="/modules/angular.min.js"></script>
    
    <!-- Include Angular Module and Controllers -->
    <script src="/javascripts/app.module.js"></script>
    <script src="/javascripts/book.controller.js"></script>
    <script src="/javascripts/student.controller.js"></script>

    <!-- Include Pure.css Framework Modules -->
    <link rel="stylesheet" type="text/css" href="/stylesheets/pure-min.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/grids-responsive-min.css">
</head>
<body>
    <div ng-app="app">
        <div ng-controller="StudentController as studentList">
            <h1 class="center">Students</h1>
 
            <h3>Student List</h3>
            <div>
                There are {{studentList.activeStudents}} active students and {{studentList.inactiveStudents}} inactive students
            </div>
            <table class="pure-table" ng-if="studentList.activeStudents > 0 || studentList.inactiveStudents > 0">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Phone</th>
                        <th>GPA</th>
                        <th>Plan</th>
                        <th>Level</th>
                        <th>Active</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="student in studentList.students track by $index">
                        <td>{{$index + 1}}</td>
                        <td>{{student.number}}</td>
                        <td>{{student.name}}</td>
                        <td>{{student.address}}</td>
                        <td>{{student.phone}}</td>
                        <td>{{student.gpa}}</td>
                        <td>{{student.plan}}</td>
                        <td>{{student.level}}</td>
                        <td><button class="pure-button" ng-click="studentList.toggleActive(this)">{{student.active}}</button></td>
                        <td><button class="pure-button" ng-click="studentList.students.splice($index,1); studentList.archiveStudents()">Remove</button></td>
                    </tr>
                </tbody>
            </table>

            <h3>Add New Student</h3>
            <div class="pure-form pure-form-aligned">
                <fieldset>
                    <div class="pure-control-group">
                        <label for="studentNumber">ID</label>
                        <input id="studentNumber" type="text" ng-model="studentList.numberText">
                    </div>

                    <div class="pure-control-group">
                        <label for="studentName">Name</label>
                        <input id="studentName" type="text" ng-model="studentList.nameText">
                    </div>

                    <div class="pure-control-group">
                        <label for="studentAddress">Address</label>
                        <input id="studentAddress" type="text" ng-model="studentList.addressText">
                    </div>

                    <div class="pure-control-group">
                        <label for="studentPhone">Phone Number</label>
                        <input id="studentPhone" type="text" ng-model="studentList.phoneText">
                    </div>

                    <div class="pure-control-group">
                        <label for="studentGPA">GPA</label>
                        <input id="studentGPA" type="text" ng-model="studentList.gpaText">
                    </div>

                    <div class="pure-control-group">
                        <label for="studentPlan">Plan</label>
                        <input id="studentPlan" type="text" ng-model="studentList.planText">
                    </div>

                    <div class="pure-control-group">
                        <label for="studentLevel">Level</label>
                        <input id="studentLevel" type="text" ng-model="studentList.levelText">
                    </div>

                    <div class="pure-controls">
                        <button class="pure-button" type="submit" ng-click="studentList.addStudent()">Submit</button>
                        <span ng-if="studentList.showError">{{studentList.errorMsg}}</span>
                    </div>
                </fieldset>
            </div>

            
        </div>
        <div ng-controller="BookController as bookList">
            <!-- ISBN number, Name, Author, Publisher, Year, Type, and Edition -->
            <h1>Books</h1>
            <div>
                There are {{bookList.inStock}} books in stock and {{bookList.outOfStock}} books out of stock.
            </div><br>
            <table class="pure-table" ng-if="bookList.inStock > 0 || bookList.outOfStock > 0">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>ISBN</th>
                        <th>Name</th>
                        <th>Author</th>
                        <th>Publisher</th>
                        <th>Year</th>
                        <th>Type</th>
                        <th>Edition</th>
                        <th>In Stock</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="book in bookList.books track by $index">
                        <td>{{$index + 1}}</td>
                        <td>{{book.number}}</td>
                        <td>{{book.name}}</td>
                        <td>{{book.author}}</td>
                        <td>{{book.publisher}}</td>
                        <td>{{book.year}}</td>
                        <td>{{book.type}}</td>
                        <td>{{book.edition}}</td>
                        <td><button class="pure-button" ng-click="bookList.toggleStock(this)">{{book.stocked}}</button></td>
                        <td><button class="pure-button" ng-click="bookList.books.splice($index,1); bookList.archiveBooks()">Remove</button></td>
                    </tr>
                </tbody>
            </table>
            <h3>Add New Book</h3>
            <div class="pure-form pure-form-aligned">
                <fieldset>
                    <div class="pure-control-group">
                        <label for="bookNumber">ISBN</label>
                        <input id="bookNumber" type="text" ng-model="book.numberText"> {{book.numberText}}
                    </div>

                    <div class="pure-control-group">
                        <label for="bookName">Name</label>
                        <input id="bookName" type="text" ng-model="book.nameText">
                    </div>

                    <div class="pure-control-group">
                        <label for="bookAuthor">Author</label>
                        <input id="bookAuthor" type="text" ng-model="book.authorText">
                    </div>

                    <div class="pure-control-group">
                        <label for="bookPublisher">Publisher</label>
                        <input id="bookPublisher" type="text" ng-model="book.publisherText">
                    </div>

                    <div class="pure-control-group">
                        <label for="bookYear">Year</label>
                        <input id="bookYear" type="text" ng-model="book.yearText">
                    </div>

                    <div class="pure-control-group">
                        <label for="bookType">Type</label>
                        <input id="bookType" type="text" ng-model="book.typeText">
                    </div>

                    <div class="pure-control-group">
                        <label for="bookEdition">Edition</label>
                        <input id="bookEdition" type="text" ng-model="book.editionText">
                    </div>

                    <div class="pure-controls">
                        <button class="pure-button" type="submit" ng-click="bookList.addBook()">Submit</button>
                    </div>
                </fieldset>
            </div>
            
        </div>
        </div>
    </div>
   
</body>
</html>
